name: "Ops: Verify Live"

on:
  workflow_call:

jobs:
  smoke-test:
    name: "Ops: Smoke Test"
    runs-on: ubuntu-latest
    # âœ… FIX: Run inside the standard Booster container (has Mage + Go pre-installed)
    container:
      image: ghcr.io/jetscale-ai/booster-dev:latest
      options: --user root

    steps:
      - uses: actions/checkout@v4

      - name: Trust Git Directory
        run: git config --global --add safe.directory '*'

      - name: Run Smoke Tests
        # Runs 'go test' against console.jetscale.ai
        env:
          E2E_ADMIN_EMAIL: ${{ secrets.JETSCALE_DEFAULT_ADMIN_EMAIL }}
          E2E_ADMIN_PASSWORD: ${{ secrets.JETSCALE_DEFAULT_ADMIN_PASSWORD }}
        run: mage test:live
