global:
  env: "local-e2e"

# 1. DATABASE
postgres:
  enabled: true
  image: "postgres:15-alpine"
  auth:
    username: "jetscale-user"
    password: "jetscale-password"
    database: "jetscale"
  persistence:
    size: 1Gi

# 2. REDIS
redis:
  enabled: true
  image: "redis:7-bullseye"

# 3. BACKEND API (Local-build mode: Skaffold builds + Kind loads)
backend-api:
  enabled: true
  replicaCount: 1
  image:
    # Local-only name â€“ built by Skaffold using the Alpine runtime stage
    repository: jetscale-backend-local
    pullPolicy: IfNotPresent
  imagePullSecrets: []

  env:
    JETSCALE_APP_NAME: "JetScale Backend (E2E)"
    JETSCALE_DEBUG: "true"
    # Required by backend bootstrap (admin user initialization)
    JETSCALE_DEFAULT_ADMIN_EMAIL: "admin@e2e.local"
    JETSCALE_DEFAULT_ADMIN_USERNAME: "admin"
    JETSCALE_DEFAULT_ADMIN_PASSWORD: "e2e-admin-password"
    # Required by backend entrypoint bootstrap (explicit host/user/password checks)
    JETSCALE_DB_HOST: "jetscale-stack-test-postgres"
    JETSCALE_DB_PORT: "5432"
    JETSCALE_DB_NAME: "jetscale"
    JETSCALE_DB_USER: "jetscale-user"
    JETSCALE_DB_PASSWORD: "jetscale-password"
    JETSCALE_DATABASE_URL: "postgresql+asyncpg://jetscale-user:jetscale-password@jetscale-stack-test-postgres:5432/jetscale"
    JETSCALE_REDIS_URL: "redis://jetscale-stack-test-redis-master:6379/0"
    JETSCALE_AWS_REGION: "us-east-1"

# 4. FRONTEND WEB (Local-build mode)
frontend:
  enabled: true
  image:
    repository: jetscale-frontend-local
    pullPolicy: IfNotPresent
  env:
    VITE_API_BASE_URL: "http://jetscale-stack-test-backend:8000"

appConfigMap:
  enabled: false
ingress:
  enabled: false
externalSecret:
  app:
    enabled: false