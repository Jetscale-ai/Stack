# Local Live-Parity mode:
# - Pull published production images (no local builds)
# - Useful to reproduce “works in dev, fails in CI/preview” issues
# - Still runs on Kind with in-cluster Postgres/Redis (self-contained)

global:
  env: "local-live"

# 1. DATABASE
postgres:
  enabled: true
  image: "postgres:15-alpine"
  auth:
    username: "jetscale-user"
    password: "jetscale-password"
    database: "jetscale"
  persistence:
    size: 1Gi

# 2. REDIS
redis:
  enabled: true
  image: "redis:7-bullseye"

# 3. BACKEND API (Published Prod Image)
backend:
  enabled: true
  replicaCount: 1
  serviceAccount:
    create: true
    name: "jetscale-service-account"
  image:
    repository: ghcr.io/jetscale-ai/backend
    tag: "4.1.2"
    pullPolicy: IfNotPresent
  imagePullSecrets: []
  service:
    type: NodePort
    port: 8000
    nodePort: 30000
  devMode:
    enabled: false
    command: []
  env:
    JETSCALE_APP_NAME: "JetScale Backend (Local Live-Parity)"
    JETSCALE_DEBUG: "false"
    JETSCALE_DB_NAME: "jetscale"
    JETSCALE_DB_USER: "jetscale-user"
    JETSCALE_DB_PASSWORD: "jetscale-password"
    JETSCALE_DATABASE_URL: "postgresql+asyncpg://jetscale-user:jetscale-password@jetscale-local-postgres:5432/jetscale"
    JETSCALE_REDIS_URL: "redis://jetscale-local-redis-master:6379/0"
    JETSCALE_AWS_REGION: "us-east-1"

# 4. FRONTEND WEB (Published Prod Image)
frontend:
  enabled: true
  serviceAccount:
    create: false
  image:
    repository: ghcr.io/jetscale-ai/frontend
    tag: "2.4.0"
    pullPolicy: IfNotPresent
  imagePullSecrets: []
  service:
    port: 80
  readinessProbe:
    httpGet:
      path: /
      port: 80
  livenessProbe:
    httpGet:
      path: /
      port: 80
  devMode:
    enabled: false
  env:
    VITE_API_BASE_URL: "http://localhost:8000"

ingress:
  enabled: false

apiExternal:
  enabled: false

